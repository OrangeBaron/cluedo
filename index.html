<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cluedo Solver Pro</title>
    <meta name="description" content="Algoritmo di deduzione per distruggere amicizie">
    <meta name="keywords" content="Cluedo, Clue, Solver, Deduzione, Gioco da Tavolo, Board Game, Algoritmo, Strategia, Francesco Focher">
    <meta name="author" content="Francesco Focher">
    <link rel="icon" href="https://raw.githubusercontent.com/googlefonts/noto-emoji/refs/heads/main/png/512/emoji_u1f575.png" type="image/png">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="app-container">

    <div id="view-setup" class="fade-in">
        <h1>üïµÔ∏è Cluedo Solver Pro</h1>
        
        <div class="card">
            <h3>Giocatori</h3>
            <p style="text-align:center; margin-bottom:15px">Inserisci i giocatori in ordine di distribuzione delle carte (senso orario dal mazziere).</p>
            
            <div class="input-row">
                <input type="text" id="new-player" placeholder="Nome..." onkeypress="handleEnter(event)">
                <button onclick="addPlayer()" style="width: 50px;">+</button>
            </div>
            
            <div id="player-list" style="text-align:center; margin-bottom:15px; min-height:30px;">
                </div>

            <div class="input-row" style="flex-direction: column;">
                <select id="who-am-i"><option value="" disabled selected>Tu chi sei?</option></select>
                <select id="starting-player"><option value="" disabled selected>Chi inizia?</option></select>
            </div>
        </div>

        <button class="action-btn" onclick="goToHandSelection()">AVANTI ‚û°Ô∏è</button>

        <div style="margin-top: 20px; text-align: center;">
            <a href="https://github.com/orangebaron/cluedo" target="_blank" style="text-decoration: none;">
                <button class="secondary" style="width: auto; display: inline-flex; align-items: center; background: #24292e; color: white; border: 1px solid #444;">
                    <svg height="20" width="20" viewBox="0 0 16 16" fill="white" style="margin-right: 8px;">
                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
                    </svg>
                    Vedi Documentazione
                </button>
            </a>
        </div>

        <div style="margin-top: 30px; padding: 15px; border-top: 1px solid var(--border); color: var(--text-muted); font-size: 0.75rem; text-align: justify; opacity: 0.7;">
            <p style="margin: 0;">
                ‚ö†Ô∏è <b>DISCLAIMER</b><br><br>
                Questo software √® stato sviluppato con il preciso scopo di annientare i tuoi avversari.<br><br>
                L'utilizzo di algoritmi di deduzione per ottenere una superiorit√† tattica schiacciante √® spesso riconosciuto come un vantaggio sleale e un atteggiamento contrario allo spirito dei giochi da tavolo.<br><br>
                Lo sviluppatore <b>declina ogni responsabilit√†</b> qualora la frustrazione generata dalla tua ineluttabile vittoria dovesse trasformare la simulazione in una scena del crimine <i>reale</i>.
            </p>
        </div>
    </div>

    <div id="view-hand" class="hidden fade-in">
        <h2>üìÇ Le Tue Prove</h2>
        <div id="hand-counter-badge" style="background: var(--bg-input); color: var(--danger); padding: 8px 16px; border-radius: 20px; font-weight: bold; font-size: 0.9rem; display: inline-block; margin-bottom: 20px; border: 1px solid var(--danger);">
            Selezionate: 0 / ?
        </div>
        <p style="text-align:center; margin-bottom:20px">Seleziona le carte che hai in mano.</p>
        
        <div class="category-group">
            <div class="category-title">Sospettati</div>
            <div class="check-grid" id="hand-suspects"></div>
        </div>
        
        <div class="category-group">
            <div class="category-title">Armi</div>
            <div class="check-grid" id="hand-weapons"></div>
        </div>
        
        <div class="category-group">
            <div class="category-title">Stanze</div>
            <div class="check-grid" id="hand-rooms"></div>
        </div>

        <button class="action-btn" style="margin-top: 30px; background: var(--success);" onclick="finalizeSetup()">‚úÖ INIZIA INDAGINE</button>
    </div>

    <div id="view-game" class="hidden fade-in">
        
        <div class="grid-container">
            <table id="main-grid"></table>
        </div>

        <div class="card turn-card">
            <div class="turn-header" style="justify-content: flex-end;">
                <button class="secondary" onclick="undoLastTurn()">‚Ü©Ô∏è&nbsp;Annulla Ultimo</button>
            </div>

            <div class="selector-group">
                <select id="turn-asker" onchange="checkBluffUI(); checkSpecialInput();"></select>
                
                <select id="turn-suspect" onchange="checkBluffUI(); checkSpecialInput();"><option value="" disabled selected>üë§ Sospettato</option></select>
                <select id="turn-weapon" onchange="checkBluffUI(); checkSpecialInput();"><option value="" disabled selected>üî´ Arma</option></select>
                <select id="turn-room" onchange="checkBluffUI(); checkSpecialInput();"><option value="" disabled selected>üè∞ Stanza</option></select>
            </div>
            
            <div id="bluff-indicator" class="bluff-msg"></div>

            <div style="margin-top: 15px; padding-top:15px; border-top:1px solid #4a5568;">
                <label style="font-size:0.85rem; color:var(--text-muted); display:block; margin-bottom:5px;">Chi ha mostrato una carta?</label>
                <select id="turn-responder" onchange="checkSpecialInput()">
                    <option value="none">‚ùå NESSUNO (Tutti passano)</option>
                </select>
            </div>
            
            <div id="private-reveal-box" class="hidden special-box">
                <label style="color:var(--accent); font-weight:bold; font-size:0.9rem; display:block; margin-bottom:5px;">üëÅÔ∏è Che carta hai visto?</label>
                <select id="turn-card-shown" style="border-color:var(--accent); color: var(--accent);">
                    <option value="">-- Seleziona carta --</option>
                </select>
            </div>

            <button class="action-btn" onclick="submitTurn()" style="margin-top:20px;">REGISTRA TURNO</button>
        </div>

        <div id="log-area">
            <div class="log-entry">> Sistema avviato. In attesa...</div>
        </div>

        <div style="text-align: right; margin-top: 8px;">
            <button class="secondary" onclick="exportGameLogs()" style="width: auto; display: inline-flex; font-size: 0.75rem; padding: 6px 12px;">
                üì• Esporta Log Partita
            </button>
        </div>
    </div>

</div>

<script src="script.js"></script>

</body>
</html>